<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password 찾기</title>
   <!-- 부트스트랩 CSS 링크 -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
   <script>
// 폼이 제출될 때 실행되는 함수
   function submitForm() {
       // 폼에서 입력한 데이터를 가져와서 'formData'객체에 저장
       // "pwdLookupForm"인 폼 엘리먼트를 찾아오기
       var formData = new FormData(document.getElementById("pwdLookupForm"));
       
       //  XMLHttpRequest 객체를 생성해서 이 객체를 사용해 Ajax 요청을 통해 서버에 폼 데이터를 전송
       var xhr = new XMLHttpRequest();
       // xhr.open() 메서드는 Ajax 요청을 설정
       // POST 메서드를 사용하여 서버의 "/login/idlookup" 엔드포인트로 요청을 보내도록 설정
       xhr.open("POST", "/login/pwdlookup", true);
       // XMLHttpRequest 객체의 상태 변화 이벤트에 대한 핸들러를 설정
       // XMLHttpRequest의 상태가 변화할 때마다 이 함수가 호출됨
       xhr.onreadystatechange = function () {
       // 서버 응답이 도착하고 HTTP 상태 코드가 200 (성공)인 경우를 확인
           if (xhr.readyState === 4 && xhr.status === 200) {
               // Ajax 요청이 완료되면 서버에서 반환한 결과를 알림창으로 표시
               alert(xhr.responseText);
           }
       };
       xhr.send(formData);
   }
</script>
</head>
<body>
    
     <div class="container">
        <h1 class="mt-5">비밀번호 찾기</h1>
        <h6>아이디를 입력하세요</h6>
        <br>
        <hr>
        <br>
        <form action="/login/idlookup" method="post" id="pwdLookupForm">
        
            <!-- 아이디 입력 필드 -->
            <div class="mb-3">
                <label for="userId" class="form-label">등록한 아이디</label>
                <input type="text" class="form-control" id="userId" name="userId" required>
            </div>
            
            <br>
            <!-- 비밀번호 찾기 버튼 -->
            <button type="submit" class="btn btn-primary">비밀번호 찾기</button>
        </form>
    </div>

    <!-- 부트스트랩 JavaScript 및 jQuery 링크 -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    
    <p>비밀번호 조회 결과: <span th:text="${pwdlookup}"></span></p>
    
    <p><a href="/login">로그인 화면으로 돌아가기</a></p>

</body>
</html>